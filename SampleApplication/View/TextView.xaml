<?xml version="1.0" encoding="utf-8"?>
<UserControl x:Class="SampleApplication.View.TextView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:res="clr-namespace:SampleApplication.Resources"
             mc:Ignorable="d"
             Background="White"
             DataContext="{Binding TextViewModel}">
    <UserControl.Resources>
        <ResourceDictionary>
            <Style x:Key="ValidationTextBoxStyle" TargetType="TextBox">
                <Setter Property="Validation.ErrorTemplate">
                    <Setter.Value>
                        <ControlTemplate>
                            <DockPanel LastChildFill="True">
                                <Border BorderBrush="Transparent" BorderThickness="0">
                                    <AdornedElementPlaceholder Name="adorner" />
                                </Border>
                            </DockPanel>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Style.Triggers>
                    <Trigger Property="Validation.HasError" Value="True">
                        <Setter Property="ToolTip" Value="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors)[0].ErrorContent}" />
                    </Trigger>
                </Style.Triggers>
            </Style>

            <Style x:Key="ValidationComboBoxStyle" TargetType="ComboBox">
                <Setter Property="Validation.ErrorTemplate">
                    <Setter.Value>
                        <ControlTemplate>
                            <DockPanel LastChildFill="True">
                                <Border BorderBrush="Transparent" BorderThickness="0">
                                    <AdornedElementPlaceholder Name="adorner" />
                                </Border>
                            </DockPanel>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Style.Triggers>
                    <Trigger Property="Validation.HasError" Value="True">
                        <Setter Property="ToolTip" Value="{Binding RelativeSource={RelativeSource Self}, Path=(Validation.Errors)[0].ErrorContent}" />
                    </Trigger>
                </Style.Triggers>
            </Style>
            <Style TargetType="Button">
                <Setter Property="Foreground" Value="White"/>
                <Setter Property="Background" Value="#547AFF"/>
                <Setter Property="Margin" Value="5 5 0 5"/>
                <Setter Property="Cursor" Value="Hand" />
                <Setter Property="HorizontalAlignment" Value="Right"/>
                <Setter Property="VerticalAlignment" Value="Center"/>
                <Setter Property="TextBlock.TextAlignment" Value="Center"/>
                <Setter Property="Width" Value="90" />
                <Setter Property="Height" Value="48" />
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="Button">
                            <Border 
                                Background="{TemplateBinding Background}" 
                                Padding="{TemplateBinding Padding}"
                                Margin="{TemplateBinding Margin}"
                                CornerRadius="3">
                                <ContentPresenter VerticalAlignment="Center" />
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>

                <Style.Triggers>
                    <Trigger Property="IsMouseOver" Value="True">
                        <Trigger.EnterActions>
                            <BeginStoryboard>
                                <Storyboard>
                                    <ColorAnimation Storyboard.TargetProperty="Background.(SolidColorBrush.Color)" To="Blue" Duration="0:0:0.2"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </Trigger.EnterActions>
                        <Trigger.ExitActions>
                            <BeginStoryboard>
                                <Storyboard>
                                    <ColorAnimation Storyboard.TargetProperty="Background.(SolidColorBrush.Color)" To="#547AFF" Duration="0:0:0.2"/>
                                </Storyboard>
                            </BeginStoryboard>
                        </Trigger.ExitActions>
                    </Trigger>
                </Style.Triggers>
            </Style>
        </ResourceDictionary>
    </UserControl.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="48"/>
            <RowDefinition Height="32"/>
            <RowDefinition Height="32"/>
            <RowDefinition Height="32"/>
            <RowDefinition Height="32"/>
            <RowDefinition Height="58"/>
            <RowDefinition Height="auto"/>
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" MinWidth="200"/>
            <ColumnDefinition Width="200" MinWidth="200"/>
            <ColumnDefinition Width="100" MinWidth="100"/>
            <ColumnDefinition Width="*" MinWidth="200"/>
        </Grid.ColumnDefinitions>
        
        <TextBox Style="{StaticResource ValidationTextBoxStyle}"
                 Grid.Row="1" 
                 Grid.Column="1" 
                 Grid.ColumnSpan="2"
                 TabIndex="0"
                 TextWrapping="Wrap" 
                 Text="{Binding Text, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay, ValidatesOnNotifyDataErrors=True}" 
                 VerticalAlignment="Center" 
                 HorizontalAlignment="Left" 
                 Width="300"/>
        <Label 
               Grid.Row="0" 
               Grid.Column="0" 
               Grid.ColumnSpan="4" 
               Content="{x:Static res:Strings.LabelTitle}" 
               HorizontalAlignment="Center" 
               VerticalAlignment="Center" 
               FontSize="16" 
               FontWeight="Bold"/>
        <Label 
               Grid.Row="3" 
               Grid.Column="0" 
               Content="{x:Static res:Strings.LabelEnterValue}" 
               HorizontalAlignment="Right" 
               VerticalAlignment="Center" 
               Margin="0,0,10,0"/>
        <ComboBox Style="{StaticResource ValidationComboBoxStyle}"
                  Grid.Row="2" 
                  Grid.Column="1" 
                  Grid.ColumnSpan="2"
                  TabIndex="1"
                  HorizontalAlignment="Left" 
                  VerticalAlignment="Center" 
                  ItemsSource="{Binding Conditions.Conditions}"
                  DisplayMemberPath="TypeName"
                  SelectedValue="{Binding Condition, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay, ValidatesOnNotifyDataErrors=True}"
                  Width="300"/>
                  
        <TextBox Style="{StaticResource ValidationTextBoxStyle}"
                 Grid.Row="3" 
                 Grid.Column="1" 
                 Grid.ColumnSpan="2"
                 HorizontalAlignment="Left" 
                 TextWrapping="Wrap"
                 TabIndex="2"
                 Text="{Binding Value, UpdateSourceTrigger=PropertyChanged, Mode=TwoWay, ValidatesOnNotifyDataErrors=True}" 
                 VerticalAlignment="Center" 
                 Width="300"/>
        <CheckBox 
                  Grid.Row="4" 
                  Grid.Column="1" 
                  Grid.ColumnSpan="2"
                  TabIndex="3"
                  Content="Czy brać pod uwagę wielkość liter" 
                  HorizontalAlignment="Left" 
                  VerticalAlignment="Center" 
                  RenderTransformOrigin="0.5,0.5" 
                  Width="300" 
                  IsChecked="{Binding IsCaseSensitive}">
            <CheckBox.RenderTransform>
                <TransformGroup>
                    <ScaleTransform/>
                    <SkewTransform/>
                    <RotateTransform Angle="0.493"/>
                    <TranslateTransform/>
                </TransformGroup>
            </CheckBox.RenderTransform>
        </CheckBox>
        <Label Grid.Row="2" Grid.Column="0" Content="{x:Static res:Strings.LabelChooseCondition}" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,0,10,0"/>
        <Label Grid.Row="1" Grid.Column="0" Content="{x:Static res:Strings.LabelEnterText}" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="0,0,10,0"/>
        <TextBlock 
                   Grid.Row="6"
                   Grid.ColumnSpan="4"
                   HorizontalAlignment="Left" 
                   TextWrapping="Wrap" Text="{Binding ResultText, UpdateSourceTrigger=PropertyChanged}" 
                   VerticalAlignment="Top"
                   FontSize="16"
                   Margin="10,10,10,10"/>

        <Button 
                Command ="{Binding CheckCommand }" 
                Grid.Row="5" 
                Grid.Column="1" 
                TabIndex="4"
                Content="Sprawdź" 
                ToolTip="{Binding Path=ToolTip }"
                ToolTipService.ShowOnDisabled="True" />
        <Button 
                Command ="{Binding DataContext.CloseCommand, RelativeSource={RelativeSource AncestorType=Window}}" 
                Grid.Row="5" 
                Grid.Column="2"  
                TabIndex="5"
                Content="Zakończ" />
    </Grid>

    

</UserControl>
